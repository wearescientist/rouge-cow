# 肉鸽牛牛 v0.10.2 武器和状态栏更新

## 更新内容

### 1. ✅ 默认武器改为远程（魔杖）

**修改前：**
- 默认武器：鞭子（近战）
- 攻击范围：100
- CD：1.0秒

**修改后：**
- 默认武器：魔杖（远程）🔮
- 攻击范围：远程投射
- CD：0.6秒
- 伤害：15

**代码修改：**
```javascript
// Game.js line ~2370
this.weapons = [new Weapon('wand', 1)];  // 默认武器改为魔杖（远程）
```

---

### 2. ✅ 武器子弹显示优化

**问题：**
- 所有子弹都是简单的4px圆形
- 不同武器看起来一样，难以区分
- "没有模型"的感觉

**修复：**
```javascript
// 子弹现在显示武器图标
if (b.icon && b.type !== 'melee') {
    this.ctx.font = '16px Arial';
    this.ctx.fillText(b.icon, pos.x, pos.y);
}
```

**效果：**
- 魔杖子弹：🔮
- 飞刀子弹：🗡️
- 火球子弹：🔥
- 闪电子弹：⚡
- 圣水子弹：💧
- 鞭子/近战：保持圆形效果

---

### 3. ✅ 状态栏新增战斗属性

**新增显示：**

```
┌─────────────────────────┐
│  ⚔️ 战斗属性             │
├─────────────────────────┤
│  🗡️ 攻击力    15       │
│  💨 移速       100%     │
│  ⚡ 攻速       100%     │
│  🎯 暴击       0%       │
│  🛡️ 护甲       0        │
└─────────────────────────┘
```

**属性说明：**

| 属性 | 图标 | 说明 |
|------|------|------|
| 攻击力 | 🗡️ | 当前武器基础伤害 × 等级加成 × 道具加成 |
| 移速 | 💨 | 基础移速100% + 道具加成（如+20%显示120%）|
| 攻速 | ⚡ | 基础攻速100% × 道具加成（fireRate）|
| 暴击 | 🎯 | 暴击率百分比，基础0% |
| 护甲 | 🛡️ | 伤害减免，基础0 |

**计算公式：**
```javascript
// 攻击力
const baseDmg = activeWeapon.cfg.dmg;  // 基础伤害
const totalDmg = baseDmg × (1 + (level-1) × 0.15) × projSize;  // 最终伤害

// 移速
const speedPercent = speed × 100;  // 如1.2显示120%

// 攻速
const fireRatePercent = fireRate × 100;  // 如1.5显示150%

// 暴击
const critPercent = crit × 100;  // 如0.15显示15%
```

---

## 文件变更

| 文件 | 修改 |
|------|------|
| `index.html` | 修改默认武器、子弹绘制、侧边栏HTML和JS更新 |

---

## 完整武器列表

| 武器 | 图标 | 类型 | 伤害 | CD | 特点 |
|------|------|------|------|-----|------|
| 鞭子 | 🪄 | 近战 | 20 | 1.0s | 近战范围 |
| 魔杖 | 🔮 | 远程 | 15 | 0.6s | ⭐ 默认武器 |
| 飞刀 | 🗡️ | 远程 | 12 | 0.4s | 高速穿透 |
| 斧头 | 🪓 | 远程 | 25 | 1.2s | 高伤害 |
| 圣经 | 📖 | 轨道 | 10 | 0.8s | 环绕攻击 |
| 火球 | 🔥 | 远程 | 30 | 1.5s | 高伤害 |
| 闪电 | ⚡ | 瞬间 | 18 | 0.5s | 快速 |
| 圣水 | 💧 | 区域 | 8 | 1.0s | 范围伤害 |

---

## 测试检查

- [x] 默认武器是魔杖（远程）
- [x] 子弹显示对应武器图标
- [x] 状态栏显示攻击力
- [x] 状态栏显示移速
- [x] 状态栏显示攻速
- [x] 状态栏显示暴击率
- [x] 状态栏显示护甲
- [x] 属性值随道具变化
