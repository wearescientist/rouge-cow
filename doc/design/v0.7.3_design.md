# v0.7.3 设计文档 - 新增40个道具

## 1. 道具分类体系

### 1.1 稀有度定义
| 稀有度 | 颜色 | 出现几率 | 价格范围 |
|--------|------|----------|----------|
| Common | 白色 | 60% | 20-50 |
| Rare | 蓝色 | 25% | 60-100 |
| Epic | 紫色 | 10% | 120-200 |
| Legendary | 金色 | 5% | 250-500 |

### 1.2 道具分类
- **攻击类**：提升伤害、攻击速度、特殊效果
- **防御类**：提升生命、护甲、减伤
- **辅助类**：移速、经验、金币、拾取范围
- **特殊类**：独特机制、组合效果

## 2. 道具列表（40个）

### 攻击类（12个）
| ID | 名称 | 图标 | 稀有度 | 效果 | 数值 |
|----|------|------|--------|------|------|
| 16 | 狂暴之血 | 🩸 | Rare | 生命越低伤害越高 | 每损失1血+10%伤害 |
| 17 | 穿透弹 | 🔫 | Common | 子弹穿透+1 | +1穿透 |
| 18 | 爆炸弹 | 💣 | Rare | 子弹爆炸范围伤害 | 爆炸半径50 |
| 19 | 连射装置 | ⚙️ | Common | 射速提升 | +20%射速 |
| 20 | 狙击镜 | 🔭 | Rare | 伤害提升但射速降低 | +50%伤害, -20%射速 |
| 21 | 分裂弹 | ✴️ | Epic | 子弹分裂成3个 | 分裂角度30° |
| 22 | 追踪芯片 | 🎯 | Rare | 子弹追踪能力增强 | 转向速度+50% |
| 23 | 毒液涂层 | ☠️ | Common | 攻击附加中毒 | 3伤害/秒, 3秒 |
| 24 | 冰冻弹 | 🧊 | Rare | 攻击附加冰冻 | 20%几率冰冻2秒 |
| 25 | 燃烧弹 | 🔥 | Common | 攻击附加燃烧 | 5伤害/秒, 2秒 |
| 26 | 雷电链 | ⚡ | Epic | 攻击连锁到附近敌人 | 连锁3个, 50%伤害 |
| 27 | 暴击心脏 | 💗 | Rare | 暴击伤害提升 | +50%暴击伤害 |

### 防御类（10个）
| ID | 名称 | 图标 | 稀有度 | 效果 | 数值 |
|----|------|------|--------|------|------|
| 28 | 护盾发生器 | 🛡️ | Rare | 获得可再生的护盾 | 2点护盾, 10秒恢复 |
| 29 | 伤害反弹 | 🔄 | Rare | 反弹受到伤害的30% | 30%反弹 |
| 30 | 无敌帧延长 | ⏱️ | Epic | 受伤后无敌时间延长 | +0.5秒无敌 |
| 31 | 生命恢复 | 💚 | Common | 每秒恢复生命 | +0.5生命/秒 |
| 32 | 伤害减免 | 🧱 | Rare | 减少受到的伤害 | -20%伤害 |
| 33 | 复活币 | 🪙 | Legendary | 死亡时复活一次 | 复活50%生命 |
| 34 | 临时护盾 | 🛡️ | Common | 进入房间获得临时护盾 | 1点护盾 |
| 35 | 荆棘护甲 | 🌵 | Rare | 近战攻击者受到伤害 | 反弹2伤害 |
| 36 | 生命偷取 | 🧛 | Epic | 造成伤害恢复生命 | 10%伤害转化为生命 |
| 37 | 紧急治疗 | 🏥 | Rare | 生命低于20%时自动治疗 | 恢复3生命, 60秒CD |

### 辅助类（10个）
| ID | 名称 | 图标 | 稀有度 | 效果 | 数值 |
|----|------|------|--------|------|------|
| 38 | 经验书 | 📚 | Common | 经验获取提升 | +25%经验 |
| 39 | 金磁铁 | 🧲 | Rare | 拾取范围大幅提升 | +100范围 |
| 40 | 幸运币 | 🍀 | Rare | 敌人掉落金币增加 | +30%金币 |
| 41 | 疾风靴 | 👢 | Epic | 移动速度大幅提升 | +40%移速 |
| 42 | 时间减缓 | ⏳ | Legendary | 周期性减缓时间 | 每30秒减缓3秒 |
| 43 | 地图雷达 | 📡 | Rare | 显示全图敌人位置 | 小地图显示敌人 |
| 44 | 商店折扣 | 🏷️ | Rare | 商店物品打折 | -30%价格 |
| 45 | 额外生命 | ❤️ | Epic | 额外生命上限 | +3最大生命 |
| 46 | 自动拾取 | 🤖 | Common | 自动拾取附近物品 | 范围+30 |
| 47 | 双倍时间 | ⏰ | Rare | 房间清理后双倍奖励时间 | 双倍掉落5秒 |

### 特殊类（8个）
| ID | 名称 | 图标 | 稀有度 | 效果 | 数值 |
|----|------|------|--------|------|------|
| 48 | 混沌骰子 | 🎲 | Legendary | 随机改变所有属性 | 每关随机变化 |
| 49 | 诅咒契约 | 📜 | Epic | 伤害+50%, 生命上限-2 | 高风险高回报 |
| 50 | 天使祝福 | 👼 | Legendary | 所有属性小幅提升 | 全属性+10% |
| 51 | 恶魔交易 | 😈 | Epic | 消耗金币发射强力子弹 | 每金币+10伤害 |
| 52 | 时空裂隙 | 🌀 | Legendary | 概率重置技能CD | 20%几率重置 |
| 53 | 复制器 | 📋 | Epic | 道具效果复制 | 所有道具效果+1 |
| 54 | 转换器 | 🔄 | Rare | 金币和经验互相转换 | 拾取时50%转换 |
| 55 | 黑洞核心 | 🕳️ | Legendary | 吸引周围所有物品 | 全屏吸引 |

## 3. 道具组合效果

### 3.1 元素组合
- 火焰弹 + 燃烧弹 = 地狱火（燃烧伤害翻倍）
- 冰冻弹 + 冰霜结晶 = 绝对零度（冰冻几率翻倍）
- 雷电链 + 雷电核心 = 雷神之怒（连锁数量+2）
- 毒液涂层 + 暗影碎片 = 瘟疫（中毒传染）

### 3.2 防御组合
- 护盾发生器 + 临时护盾 = 永久护盾（护盾不消失）
- 荆棘护甲 + 伤害反弹 = 刺猬（反弹伤害翻倍）
- 生命恢复 + 生命偷取 = 吸血鬼（恢复效果翻倍）

### 3.3 辅助组合
- 金磁铁 + 黑洞核心 = 万磁王（吸引范围翻倍）
- 经验书 + 幸运币 = 幸运学霸（经验金币双加成）

## 4. 代码实现

### 4.1 道具效果扩展
```javascript
// 在ItemManager.getStats中添加新效果处理
case 'berserk': stats.berserk = (stats.berserk || 0) + v; break;
case 'explosive': stats.explosive = true; break;
case 'split': stats.split = (stats.split || 0) + v; break;
case 'poison': stats.poisonDmg = (stats.poisonDmg || 0) + v; break;
case 'freeze': stats.freezeChance = (stats.freezeChance || 0) + v; break;
case 'burn': stats.burnDmg = (stats.burnDmg || 0) + v; break;
case 'chain': stats.chain = (stats.chain || 0) + v; break;
case 'shield': stats.shield = (stats.shield || 0) + v; break;
case 'reflect': stats.reflect = (stats.reflect || 0) + v; break;
case 'regen': stats.regen = (stats.regen || 0) + v; break;
case 'revive': stats.revive = (stats.revive || 0) + v; break;
case 'discount': stats.discount = (stats.discount || 0) + v; break;
case 'radar': stats.radar = true; break;
```

### 4.2 子弹效果扩展
```javascript
// 在子弹更新中添加效果
if (stats.explosive) {
    // 爆炸效果
}
if (stats.split && !b.hasSplit) {
    // 分裂效果
}
if (stats.chain) {
    // 连锁效果
}
```

## 5. 测试计划

1. 测试每个新道具的获取和效果
2. 测试道具组合效果
3. 测试稀有度分布
4. 测试价格平衡性
5. 录制测试视频
